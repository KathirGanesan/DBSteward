<?xml version="1.0" encoding="utf-8"?>
<!--
  schema_example.xml
  example of a limited view into a table

  @package DBSteward
  @license http://www.opensource.org/licenses/bsd-license.php Simplified BSD License
  @author Nicholas J Kiraly <kiraly.nicholas@gmail.com>
-->
<dbsteward>
  <database>
    <host>someappdbserver</host>
    <name>someapp_db</name>
    <role>
      <application>someapp</application>
      <owner>pgsql</owner>
      <replication>someapp_slony</replication>
      <readonly>someapp_readonly</readonly>
    </role>
    <slony>
      <masterNode id="1" />
      <replicaNode id="2" providerId="1" />
      <replicaNode id="3" providerId="2" />
      <replicationSet id="1" />
      <replicationUpgradeSet id="2" />
    </slony>
  </database>
  <schema name="someschema" owner="ROLE_OWNER">
    <table name="group_list" owner="ROLE_OWNER" primaryKey="group_list_id" slonyId="3">
      <column name="group_list_id" type="bigserial" slonyId="3" />
      <column name="group_create_time" type="timestamp with time zone" null="false" />
      <column name="group_description" type="text" null="false" />
      <column name="group_name" type="character varying(50)" />
      <column name="group_permission" type="boolean" default="true" />
      <column name="group_deleted" type="boolean" default="false" />
      <column name="group_visible" type="boolean" default="TRUE" />
      <grant role="ROLE_APPLICATION" operation="SELECT, INSERT, UPDATE" />
    </table>
    <view name="group_list_view" owner="ROLE_OWNER">
      <viewQuery sqlFormat="pgsql8">SELECT * FROM public.group_list WHERE group_deleted = FALSE AND group_visible = TRUE</viewQuery>
      <viewQuery sqlFormat="mssql10">SELECT * FROM dbo.group_list WHERE group_deleted = 'f' AND group_visible = 't'</viewQuery>
      <grant operation="SELECT" role="ROLE_APPLICATION" />
    </view>
  </schema>
</dbsteward>